# 舞台セット図作成アプリケーション

## プロジェクト概要
このアプリケーションは、舞台セット図を直感的に作成するためのWebベースのツールです。SVG形式のパーツを配置し、移動、拡大縮小、回転、テキストの追加など、様々な操作を行うことができます。最終的なセット図はPDFとしてエクスポート可能です。

## 実装済み機能

### 1. SVGパーツの管理
- `SVG_icon`ディレクトリに格納されたカテゴリ別のSVGパーツをサイドバーに表示します。
- ドロップされたSVGパーツは、元画像の60%のサイズでステージに配置されます。
- 配置されたSVGパーツは、元の縦横比を維持したままリサイズ可能です。

### 2. アイテム操作（SVGパーツおよびテキストボックス共通）
- **選択:**
    - アイテムをシングルクリックで選択（バウンディングボックス表示）。
    - `Shift`キーまたは`Cmd`キー（Mac）を押しながらクリックすることで複数アイテムを選択/選択解除できます。
- **移動:** 選択されたアイテム（単一または複数）をドラッグして移動できます。
- **拡大縮小:** 選択されたアイテム（単一または複数）をリサイズハンドルで拡大縮小できます。複数選択時は、操作しているアイテムの比率に合わせて他のアイテムも同時にリサイズされます。
- **回転:** アイテム上部の回転ハンドルをドラッグすることで回転できます。複数選択時は、操作しているアイテムの角度変化に合わせて他のアイテムも同時に回転します。
- **回転リセット:** 「回転をリセット」ボタンで、選択されたアイテムの回転角度を0に戻します。
- **削除:** 「選択したアイテムを削除」ボタンで、選択されたアイテムをステージから削除します。
- **グレー表示:** 「グレー表示」ボタンで、選択されたアイテムをグレー表示/通常表示に切り替えます（レンタル品などの視覚的区別のため）。

### 3. テキストボックス機能
- 「テキストボックス追加」ボタンで、ステージ上にテキストボックスを配置できます。
- テキストボックスはクリックで選択され、ダブルクリックでテキスト編集モードに入ります。
- テキストボックスもSVGパーツと同様に、移動、拡大縮小、回転が可能です。
- テキストボックスの枠線は非表示です。

### 4. PDFエクスポート
- 「PDF書き出し」ボタンで、現在のステージ図をPDFファイルとしてエクスポートできます。

### 5. UI/UXの改善
- ステージのアスペクト比は4:3に固定されています。
- 選択されたアイテムには視覚的なバウンディングボックスが表示されます。
- 回転ハンドルは視認性を考慮したデザインになっています。

## アプリケーションの起動方法

1.  プロジェクトディレクトリ（`stage-set-app`）に移動します。
2.  以下のコマンドを実行して、ローカルHTTPサーバーを起動します。
    ```bash
    python3 -m http.server 8000 &
    ```
3.  Webブラウザで `http://localhost:8000` にアクセスします。

## 基本的な操作方法

- **パーツの配置:** サイドバーからSVGパーツをステージにドラッグ＆ドロップします。
- **アイテムの選択:** アイテムをシングルクリックします。複数選択は`Shift`または`Cmd`キーを押しながらクリックします。
- **アイテムの移動:** 選択されたアイテムをドラッグします。
- **アイテムのリサイズ:** 選択されたアイテムの四隅に表示されるリサイズハンドルをドラッグします。
- **アイテムの回転:** 選択されたアイテムの上部に表示される回転ハンドルをドラッグします。
- **テキストの編集:** テキストボックスをダブルクリックします。
- **PDF出力:** 「PDF書き出し」ボタンをクリックします。
- **アイテムの削除:** アイテムを選択し、「選択したアイテムを削除」ボタンをクリックします。
- **アイテムのグレー表示:** アイテムを選択し、「グレー表示」ボタンをクリックします。
- **回転のリセット:** アイテムを選択し、「回転をリセット」ボタンをクリックします。
